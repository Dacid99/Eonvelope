{% load static %}
{% load bootstrap_css bootstrap_javascript bootstrap_messages from django_bootstrap5 %}
{% load translate get_current_language from i18n %}
{% load progressive_web_app_meta from pwa %}

{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" data-bs-theme="auto">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="author" content="David Aderbauer" />
        <meta name="copyright"
              content="© 2025 David Aderbauer &amp; The Eonvelope Contributors." />
        <meta name="license" content="AGPLv3" />
        {% progressive_web_app_meta %}
        <link rel="icon" href="{% static 'eonvelope/icons/favicon.ico' %}" />
        <link rel="icon"
              type="image/png"
              sizes="32x32"
              href="{% static 'eonvelope/icons/favicon-32x32.png' %}" />
        <link rel="icon"
              type="image/png"
              sizes="16x16"
              href="{% static 'eonvelope/icons/favicon-16x16.png' %}" />
        <title>

            {% block title %}
            {% endblock title %}

            {% translate "Eonvelope" %}
        </title>
        {% bootstrap_css %}
        <link href="{% static 'fontawesomefree/css/fontawesome.css' %}"
              rel="stylesheet"
              type="text/css" />
        <link href="{% static 'fontawesomefree/css/brands.css' %}"
              rel="stylesheet"
              type="text/css" />
        <link href="{% static 'fontawesomefree/css/solid.css' %}"
              rel="stylesheet"
              type="text/css" />
        <script src="{% static 'web/js/bs_theme-toggler.js' %}"></script>

    </head>

    <body>

        <header class="sticky-top shadow">
            <nav class="navbar navbar-expand-lg bg-body-tertiary" role="navigation">
                <div class="container-fluid">
                    <a class="navbar-brand" href="{% url 'web:dashboard' %}">
                        <img class="me-1"
                             src="{% static 'eonvelope/icons/favicon.svg' %}"
                             alt="{% translate "Eonvelope" %}"
                             height="26"
                             width="26" />
                        E⚬nvelope
                    </a>
                    <button class="navbar-toggler"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target=".collapse"
                            aria-controls="navbar-nav"
                            aria-expanded="false"
                            aria-label="{% translate 'Toggle navigation' %}">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse nav-pills" id="navbarNav">
                        <div class="navbar-nav me-auto">
                            <a class="nav-link 
                                {% block nav_class_emails %}link-body-emphasis{% endblock nav_class_emails %}
                             " href="{% url 'web:email-filter-list' %}">{% translate "Emails" %}<i class="fa-regular fa-envelope mx-1" aria-hidden="true"></i></a>
                            <a class="nav-link 
                                {% block nav_class_attachments %}link-body-emphasis{% endblock nav_class_attachments %}
                             " href="{% url 'web:attachment-filter-list' %}">{% translate "Attachments" %}<i class="fa-solid fa-paperclip mx-1" aria-hidden="true"></i></a>
                            <a class="nav-link 
                                {% block nav_class_correspondents %}link-body-emphasis{% endblock nav_class_correspondents %}
                             " href="{% url 'web:correspondent-filter-list' %}">{% translate "Correspondents" %}<i class="fa-solid fa-address-book mx-1" aria-hidden="true"></i></a>
                        </div>
                        <div class="navbar-nav me-auto">
                            <a class="nav-link 
                                {% block nav_class_accounts %}link-body-emphasis{% endblock nav_class_accounts %}
                             " href="{% url 'web:account-filter-list' %}">{% translate "Accounts" %}<i class="fa-solid fa-at mx-1"></i></a>
                            <a class="nav-link 
                                {% block nav_class_mailboxes %}link-body-emphasis{% endblock nav_class_mailboxes %}
                             " href="{% url 'web:mailbox-filter-list' %}">{% translate "Mailboxes" %}<i class="fa-solid fa-inbox mx-1" aria-hidden="true"></i></a>
                            <a class="nav-link 
                                {% block nav_class_daemons %}link-body-emphasis{% endblock nav_class_daemons %}
                             " href="{% url 'web:daemon-filter-list' %}">{% translate "Routines" %}<i class="fa-solid fa-calendar-days mx-1" aria-hidden="true"></i></a>
                        </div>
                        <div class="navbar-nav align-items-end">
                            {% if user.is_authenticated %}
                                <a class="nav-link link-body-emphasis text-capitalize"
                                   href="{% url 'account_logout' %}">
                                    {{ user.username }}<i class="fa fa-user-circle mx-1" aria-hidden="true"></i>
                                </a>
                            {% else %}
                                <a class="nav-link link-body-emphasis" href="{% url 'account_login' %}">
                                    Login<i class="fa fa-user-circle mx-1" aria-hidden="true"></i>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        {% bootstrap_messages %}

        <main class="container my-3">

            {% block content %}
            {% endblock content %}

            {% block overlay_elements %}
            {% endblock overlay_elements %}

        </main>

        {% include "web/partials/_footer.html" %}

        {% bootstrap_javascript %}

        {% block scripts %}
        {% endblock scripts %}

    </body>
</html>
